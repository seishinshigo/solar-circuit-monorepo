#!/bin/bash

# 未保存の *_report.md が workorders/reports/ に存在しない場合はコミットを拒否

# workorders/reports/ ディレクトリ内の *_report.md ファイル数をカウント
REPORT_COUNT=$(find projects/solar_circuit/workorders/reports/ -maxdepth 1 -name "*_report.md" | wc -l)

if [ "$REPORT_COUNT" -eq 0 ]; then
  echo "Error: No *_report.md files found in projects/solar_circuit/workorders/reports/."
  echo "Please save your report using 'python -m solar_circuit.cli report save <ID> <file>' before committing."
  exit 1
fi

exit 0
